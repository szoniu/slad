<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator śladu węglowego</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <!-- Informacja wprowadzająca -->
    <h2 class="fw-bold d-flex align-items-center text-dark">Kalkulator śladu węglowego</h2>
    <div class="text-muted fw-semibold fs-6 mb-4">
        Przygotuj się na rosnące wymagania rynku i nowe regulacje. Skorzystaj z naszego kalkulatora i sprawdź ślad
        węglowy Twojego przedsiębiorstwa. Dowiedz się, jak emisyjność Twojej firmy przelicza się na pracownika, obrót w
        PLN oraz metr kwadratowy. Podpowiemy Ci też, jak możesz ją zredukować!


        Kalkulator to kompleksowe i bezpłatne narzędzie, z którego może skorzystać każda firma. Buduj z nami swoją
        konkurencyjność klimatyczną i osiągaj realne korzyści.
    </div>

    <!-- Stepper Navigation -->
    <div class="stepper-nav mb-5">
        <div class="stepper-item me-5 current" data-step="1">
            <div class="circle"></div>
            <h3 class="stepper-title">Profil firmy</h3>
        </div>
        <div class="stepper-item me-5" data-step="2">
            <div class="circle"></div>
            <h3 class="stepper-title">Zakres 1: emisje bezpośrednie</h3>
        </div>
        <div class="stepper-item me-5" data-step="3">
            <div class="circle"></div>
            <h3 class="stepper-title">Zakres 2: emisje pośrednie</h3>
        </div>
        <div class="stepper-item me-5" data-step="4">
            <div class="circle"></div>
            <h3 class="stepper-title">Raport</h3>
        </div>
        <div class="stepper-item me-5" data-step="5">
            <div class="circle"></div>
            <h3 class="stepper-title">Kolejne kroki</h3>
        </div>
    </div>


    <!-- Form -->
    <form id="stepper-form" method="POST" action="{{ url_for('save_company_profile') }}">

        <!-- Step 1 -->
        <div class="step" data-step="1">

            <div class="pb-10 pb-lg-15">
                <h2 class="fw-bold d-flex align-items-center text-gray-900">Uzupełnij profil firmy</h2>
                <div class="text-muted fw-semibold fs-6">
                    Uzupełnij dane swojej firmy. Zwróć uwagę na ich poprawność. Przygotuj faktury i inne dokumenty,
                    zgodnie z
                    <a href="#" class="link-primary fw-bold">listą kontrolną</a>. Dane w kalkulatorze zapisujemy
                    automatycznie.
                    Możesz je uzupełnić w dowolnym momencie. Dbamy o bezpieczeństwo Twoich danych.
                </div>
            </div>

            <div class="mb-4">
                <label class="form-label">Nazwa firmy</label>
                <input type="text" name="company_name" class="form-control form-control-lg" required/>
            </div>

            <div class="mb-4">
                <label class="form-label">NIP/REGON firmy</label>
                <input type="text" name="company_nip" class="form-control form-control-lg" required/>
            </div>

            <div class="mb-4">
                <label class="form-label">Branża</label>
                <select name="business_type" id="business_type" class="form-select form-select-lg" required>
                    <option value=""></option>
                    <option value="1">A. Rolnictwo, leśnictwo, łowiectwo i rybactwo</option>
                    <option value="2">B. Górnictwo i wydobywanie</option>
                    <option value="3">C. Przetwórstwo przemysłowe</option>
                    <option value="4">D. Wytwarzanie i
                        zaopatrywanie w energię elektryczną,
                        gaz, parę wodną, gorącą wodę i
                        powietrze do układów
                        klimatyzacyjnych
                    </option>
                    <option value="5">E. Dostawa wody;
                        gospodarowanie ściekami i odpadami
                        oraz działalność związana z
                        rekultywacją
                    </option>
                    <option value="6">F. Budownictwo
                    </option>
                    <option value="7">G. Handel hurtowy i
                        detaliczny; naprawa pojazdów
                        samochodowych, włączając motocykle
                    </option>
                    <option value="8">H. Transport i
                        gospodarka magazynowa
                    </option>
                    <option value="9">I. Działalność
                        związana z zakwaterowaniem i
                        usługami gastronomicznymi
                    </option>
                    <option value="10">J. Informacja i
                        komunikacja
                    </option>
                    <option value="11">K. Działalność
                        finansowa i ubezpieczeniowa
                    </option>
                    <option value="12">L. Działalność
                        związana z obsługą rynku
                        nieruchomości
                    </option>
                    <option value="13">M. Działalność
                        profesjonalna, naukowa i techniczna
                    </option>
                    <option value="14">N. Działalność w
                        zakresie usług administrowania i
                        działalność wspierająca
                    </option>
                    <option value="15">O. Administracja
                        publiczna i obrona narodowa;
                        obowiązkowe zabezpieczenia społeczne
                    </option>
                    <option value="16">P. Edukacja</option>
                    <option value="17">Q. Opieka zdrowotna i
                        pomoc społeczna
                    </option>
                    <option value="18">R. Działalność
                        związana z kulturą, rozrywką i
                        rekreacją
                    </option>
                    <option value="19">S. Pozostała
                        działalność usługowa
                    </option>
                    <option value="20">T. Gospodarstwa
                        domowe zatrudniające pracowników;
                        gospodarstwa domowe produkujące
                        wyroby i świadczące usługi na własne
                        potrzeby
                    </option>
                    <option value="21">U. Organizacje i
                        zespoły eksterytorialne
                    </option>
                </select>
            </div>


            <!-- Sekcja z dodatkowymi opcjami -->
            <div id="additional_options" class="mb-4 d-none">
                <label for="additional_select" class="form-label">Dodatkowe opcje</label>
                <select name="additional_select" id="additional_select" class="form-select form-select-lg">
                    <!-- Dynamiczne opcje będą tutaj wstawiane -->
                </select>
            </div>

            <div class="fv-row mb-4">
                <label class="form-label required">Okres raportowania
                    <span class="ms-1" data-bs-toggle="tooltip"
                          title="Wybierz przedział czasowy (rok), dla którego obliczysz ślad węglowy swojej firmy">
                        <i class="fas fa-info-circle text-gray-500 fs-6"></i>
                    </span>
                </label>
                <select name="reporting_period" class="form-select form-select-lg form-select-solid" required>
                    <option value=""></option>
                    <option value="2021">2021</option>
                    <option value="2022">2022</option>
                    <option value="2023">2023</option>
                    <option value="2024">2024</option>
                </select>
            </div>

            <div class="fv-row mb-4">
                <label class="form-label required">Liczba pracowników
                    <span class="ms-1" data-bs-toggle="tooltip"
                          title="Podaj średnią liczbę osób zatrudnionych w danym roku. Uwzględnij wszystkich pracowników – w tym etatowych, sezonowych, tymczasowych etc.">
                        <i class="fas fa-info-circle text-gray-500 fs-6"></i>
                    </span>
                </label>
                <input type="number" name="employee_count" class="form-control form-control-lg form-control-solid"
                       required/>
            </div>

            <div class="fv-row mb-4">
                <label class="form-label required">Roczny obrót (PLN)
                    <span class="ms-1" data-bs-toggle="tooltip"
                          title="Wpisz sumę wszystkich wpływów ze sprzedaży produktów oraz usług w danym roku, pomniejszoną o kwotę podatku VAT">
                        <i class="fas fa-info-circle text-gray-500 fs-6"></i>
                    </span>
                </label>
                <input type="number" name="annual_revenue" class="form-control form-control-lg form-control-solid"
                       required/>
            </div>

            <div class="fv-row mb-4">
                <label class="form-label required">Powierzchnia użytkowa (m<sup>2</sup>)
                    <span class="ms-1" data-bs-toggle="tooltip"
                          title="Podsumuj powierzchnię wszystkich pomieszczeń użytkowych swojej firmy w danym roku (np. biuro, halę produkcyjną). Nie uwzględniaj wind i klatek schodowych">
                        <i class="fas fa-info-circle text-gray-500 fs-6"></i>
                    </span>
                </label>
                <input type="number" name="usable_area" class="form-control form-control-lg form-control-solid"
                       required/>
            </div>

            <div class="d-flex justify-content-end">
                <div>
                    <button type="button" class="btn btn-primary next-step">Następny krok</button>
                </div>
            </div>

        </div>

        <!-- Step 2 (Hidden by default) -->
        <div class="step d-none" data-step="2">
            <div class="w-100">
                <!-- Stacjonarne źródła emisji -->
                <div class="pb-10 pb-lg-15">
                    <h2 class="fw-bold d-flex align-items-center text-gray-900">Stacjonarne źródła emisji</h2>
                    <div class="text-muted fw-semibold fs-6">
                        Uzupełnij dane dotyczące wszystkich rodzajów paliw zużywanych w źródłach stacjonarnych.
                        Uwzględnij spalanie paliw stałych (np. węgiel, drewno, pellet), gazowych (np. gaz ziemny na
                        ogrzewanie budynku)
                        oraz ciekłych (np. benzyna do agregatów). Podaj emisje powstałe w wyniku procesów
                        technologicznych oraz ulatniających się czynników chłodniczych z klimatyzacji.
                    </div>
                </div>

                <!-- Przekazanie JSON-a z danymi -->
                <div id="dataContainer" data-fuels-units='{{ fuels_units | safe }}'></div>

                <!-- Tabela wyświetlająca dodane emisje -->
                <table id="stacjonarne_emisje_table" class="table">
                    <thead>
                    <tr>
                        <th>Paliwo</th>
                        <th>Zużycie</th>
                        <th>Jednostka</th>
                        <th>Akcje</th>
                    </tr>
                    </thead>
                    <tbody>
                    <!-- Wiersze będą dodawane dynamicznie -->
                    </tbody>
                </table>


                <!-- Przycisk Dodaj źródło emisji -->
                <div class="form-group mt-5">
                    <button type="button" id="dodaj_stacjonarne_btn" class="btn btn-primary">Dodaj źródło emisji
                    </button>
                </div>


                <!-- Modal do dodawania stacjonarnych źródeł emisji -->
                <div class="modal fade" id="stacjonarneEmisjeModal" tabindex="-1"
                     aria-labelledby="stacjonarneEmisjeModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="stacjonarneEmisjeModalLabel">Dodaj źródło emisji</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <!-- Zmieniamy div na tag form -->
                                <form id="stacjonarne_emisje_form">
                                    <div class="form-group">
                                        <label for="paliwo">Paliwo:</label>
                                        <select id="paliwo" name="paliwo" class="form-select">
                                            {% for fuel_type in fuel_types %}
                                            <option value="{{ fuel_type }}">{{ fuel_type }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="zuzycie">Zużycie:</label>
                                        <input type="text" id="zuzycie" name="zuzycie" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="jednostka">Jednostka:</label>
                                        <select id="jednostka" name="jednostka" class="form-select">
                                            <!-- Jednostki zostaną załadowane dynamicznie -->
                                        </select>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Anuluj</button>
                                <button type="button" id="zapisz_emisje_btn" class="btn btn-primary">Zapisz</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal do wyświetlania obliczeń -->
                <div class="modal fade" id="emissionCalculationsModal" tabindex="-1"
                     aria-labelledby="emissionCalculationsModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="emissionCalculationsModalLabel">Podsumowanie obliczeń
                                    emisji</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <!-- Tutaj wstawimy obliczenia -->
                                <div id="emissionResults"></div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Zamknij</button>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="separator my-5"></div>

                <!-- Mobilne źródła emisji -->
                <div class="pb-10 pb-lg-15">
                    <h2 class="fw-bold d-flex align-items-center text-gray-900">Mobilne źródła emisji</h2>
                    <div class="text-muted fw-semibold fs-6">
                        Wpisz dane dotyczące firmowych pojazdów. Uwzględnij wszystkie auta, które są własnością lub
                        podlegają nadzorowi firmy, w tym pojazdy leasingowane.
                    </div>
                </div>

                <!-- Repeater for Mobilne źródła emisji -->
                <!-- Przekazanie JSON-a z danymi o mobilnych źródłach emisji -->
                <div id="mobilneDataContainer" data-vehicles-data='{{ vehicles_data | safe }}'></div>

                <!-- Tabela wyświetlająca dodane pojazdy -->
                <table id="mobilne_emisje_table" class="table">
                    <thead>
                    <tr>
                        <th>Liczba pojazdów</th>
                        <th>Rodzaj pojazdu (Level 1)</th>
                        <th>Level 2</th>
                        <th>Level 3</th>
                        <th>Sposób zasilania</th>
                        <th>Zużycie paliwa</th>
                        <th>Jednostka</th>
                        <th>Akcje</th>
                    </tr>
                    </thead>
                    <tbody>
                    <!-- Wiersze będą dodawane dynamicznie -->
                    </tbody>
                </table>

                <!-- Przycisk Dodaj pojazd -->
                <div class="form-group mt-5">
                    <button type="button" id="dodaj_mobilne_btn" class="btn btn-primary">Dodaj pojazd</button>
                </div>

                <!-- Modal do dodawania mobilnych źródeł emisji -->
                <div class="modal fade" id="mobilneEmisjeModal" tabindex="-1" aria-labelledby="mobilneEmisjeModalLabel"
                     aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="mobilneEmisjeModalLabel">Dodaj pojazd</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <!-- Form do dodawania mobilnych źródeł emisji -->
                                <form id="mobilne_emisje_form">
                                    <div class="form-group">
                                        <label for="liczba_pojazdow_modal">Liczba pojazdów:</label>
                                        <input type="number" id="liczba_pojazdow_modal" name="liczba_pojazdow_modal"
                                               class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="rodzaj_pojazdu_modal">Rodzaj pojazdu (Level 1):</label>
                                        <select id="rodzaj_pojazdu_modal" name="rodzaj_pojazdu_modal"
                                                class="form-select" required></select>
                                    </div>
                                    <div class="form-group">
                                        <label for="level2_modal">Level 2:</label>
                                        <select id="level2_modal" name="level2_modal" class="form-select"
                                                required></select>
                                    </div>
                                    <div class="form-group">
                                        <label for="level3_modal">Level 3:</label>
                                        <select id="level3_modal" name="level3_modal" class="form-select"
                                                required></select>
                                    </div>
                                    <div class="form-group">
                                        <label for="sposob_zasilania_modal">Sposób zasilania lub obciążenie:</label>
                                        <select id="sposob_zasilania_modal" name="sposob_zasilania_modal"
                                                class="form-select" required>
                                            <!-- Opcje będą ładowane dynamicznie -->
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="zuzycie_paliwa_modal">Zużycie paliwa lub roczny dystans:</label>
                                        <input type="number" id="zuzycie_paliwa_modal" name="zuzycie_paliwa_modal"
                                               class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="jednostka_modal">Jednostka:</label>
                                        <select id="jednostka_modal" name="jednostka_modal" class="form-select"
                                                required>
                                            <!-- Opcje jednostek zostaną dodane dynamicznie przez JavaScript -->
                                        </select>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Anuluj</button>
                                <button type="button" id="zapisz_mobilne_btn" class="btn btn-primary">Zapisz</button>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- Stepper Navigation Buttons -->
                <div class="d-flex justify-content-between mt-3">
                    <!-- Przycisk "Poprzedni krok" po lewej stronie -->
                    <div>
                        <button type="button" class="btn btn-secondary prev-step">Poprzedni krok</button>
                    </div>

                    <!-- Przycisk "Następny krok" po prawej stronie -->
                    <div>
                        <button type="button" class="btn btn-primary next-step">Następny krok</button>
                    </div>
                </div>

            </div>
        </div>


        <!-- Step 3 (Hidden by default) -->
        <div class="step d-none" data-step="3">
            <div class="pb-10 pb-lg-15">
                <!-- Energia Elektryczna -->
                <h2 class="fw-bold d-flex align-items-center text-gray-900">Energia elektryczna</h2>
                <div class="text-muted fw-semibold fs-6">
                    Wskaż wszystkie źródła zakupionej lub dostarczonej z zewnątrz energii elektrycznej oraz roczne
                    zużycie tej energii w odpowiedniej jednostce. Jeśli korzystasz z energii do ładowania samochodów
                    elektrycznych oraz plug-in, dodaj również te dane.


                    Nie uwzględniaj wyprodukowanej przez Ciebie energii, która pochodzi z OZE. W Zakresie 2 nie generuje
                    ona emisji. Emisje związane np. z wyprodukowaniem modułów fotowoltaicznych nie są brane pod uwagę w
                    tej kalkulacji, bo wchodzą w Zakres 3.
                </div>

                <!-- Repeater for Energia Elektryczna -->
                <div id="kt_docs_repeater_energia_elektryczna">
                    <!-- Tabela do wyświetlania dodanych danych -->
                    <table id="energia_elektryczna_table" class="table">
                        <thead>
                        <tr>
                            <th>Pochodzenie energii</th>
                            <th>Dostawca energii elektrycznej</th>
                            <th>Zużycie</th>
                            <th>Jednostka</th>
                            <th>Akcje</th>
                        </tr>
                        </thead>
                        <tbody>
                        <!-- Wiersze będą dodawane dynamicznie przez JS -->
                        </tbody>
                    </table>

                    <div class="form-group mt-5">
                        <!-- Przycisk dla energii elektrycznej -->
                        <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                data-bs-target="#energiaElektrycznaModal">Dodaj dostawcę energii elektrycznej
                        </button>
                    </div>

                    <!-- Modal do dodawania energii elektrycznej -->
                    <div class="modal fade" id="energiaElektrycznaModal" tabindex="-1"
                         aria-labelledby="energiaElektrycznaModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="energiaElektrycznaModalLabel">Dodaj dostawcę energii
                                        elektrycznej</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                            aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <form id="energia_elektryczna_form">
                                        <div class="form-group">
                                            <label>Pochodzenie energii:</label>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" id="pochodzenie_oze"
                                                       name="pochodzenie_energii" value="oze" required>
                                                <label class="form-check-label" for="pochodzenie_oze">OZE</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" id="pochodzenie_nie_oze"
                                                       name="pochodzenie_energii" value="nie_oze" required>
                                                <label class="form-check-label" for="pochodzenie_nie_oze">nie
                                                    OZE</label>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="dostawca_energia_elektryczna">Dostawca energii
                                                elektrycznej:</label>
                                            <select id="dostawca_energia_elektryczna"
                                                    name="dostawca_energia_elektryczna"
                                                    class="form-select" required>
                                                <option value=""></option>
                                                <option value="Alchemia S.A.">Alchemia S.A.</option>
                                                <option value="Energia Polska">Energia Polska</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="zuzycie_energia_elektryczna">Zużycie:</label>
                                            <input type="number" id="zuzycie_energia_elektryczna"
                                                   name="zuzycie_energia_elektryczna" class="form-control" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="jednostka_energia_elektryczna">Jednostka:</label>
                                            <select id="jednostka_energia_elektryczna"
                                                    name="jednostka_energia_elektryczna"
                                                    class="form-select" required>
                                                <option value="MWh/rok">MWh/rok</option>
                                                <option value="kWh/rok">kWh/rok</option>
                                            </select>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Anuluj
                                    </button>
                                    <button type="button" id="zapisz_energia_elektryczna_btn" class="btn btn-primary">
                                        Zapisz
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="form-check mt-5">
                    <label class="form-label">Czy do ładowania samochodów elektrycznych (w tym hybrydowych Plug-in)
                        zużywasz zakupioną energię elektryczną?</label>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="ladowanie_samochodow" value="nie" required>
                        <label class="form-check-label">nie</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="ladowanie_samochodow" value="tak" required>
                        <label class="form-check-label">tak</label>
                    </div>
                </div>
            </div>

            <div class="pb-10 pb-lg-15">
                <!-- Energia Cieplna -->
                <h2 class="fw-bold d-flex align-items-center text-gray-900 mt-5">Energia cieplna</h2>
                <div class="text-muted fw-semibold fs-6">
                    Podaj dane dotyczące zakupionej lub dostarczonej z zewnątrz energii cieplnej, np. ciepła sieciowego.
                    Uzupełnij informacje o dostawcach oraz rocznym zużyciu w wybranej jednostce.


                    Nie uwzględniaj wyprodukowanej przez Ciebie energii, która pochodzi z OZE. W Zakresie 2 nie generuje
                    ona emisji. Emisje związane np. z wyprodukowaniem modułów fotowoltaicznych nie są brane pod uwagę w
                    tej kalkulacji, bo wchodzą w Zakres 3.
                </div>

                <!-- Repeater for Energia Cieplna -->
                <div id="kt_docs_repeater_energia_cieplna">
                    <!-- Tabela do wyświetlania dodanych danych -->
                    <table id="energia_cieplna_table" class="table">
                        <thead>
                        <tr>
                            <th>Dostawca energii cieplnej</th>
                            <th>Zużycie</th>
                            <th>Jednostka</th>
                            <th>Akcje</th>
                        </tr>
                        </thead>
                        <tbody>
                        <!-- Wiersze będą dodawane dynamicznie przez JS -->
                        </tbody>
                    </table>

                    <div class="form-group mt-5">
                        <!-- Przycisk dla energii cieplnej -->
                        <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                data-bs-target="#energiaCieplnaModal">Dodaj dostawcę energii cieplnej
                        </button>
                    </div>

                    <!-- Modal do dodawania energii cieplnej -->
                    <div class="modal fade" id="energiaCieplnaModal" tabindex="-1"
                         aria-labelledby="energiaCieplnaModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="energiaCieplnaModalLabel">Dodaj dostawcę energii
                                        cieplnej</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                            aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <form id="energia_cieplna_form">
                                        <div class="form-group">
                                            <label for="dostawca_energia_cieplna">Dostawca energii cieplnej:</label>
                                            <select id="dostawca_energia_cieplna" name="dostawca_energia_cieplna"
                                                    class="form-select" required>
                                                <option value=""></option>
                                                <option value="Dostawca 1">Dostawca 1</option>
                                                <option value="Dostawca 2">Dostawca 2</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="zuzycie_energia_cieplna">Zużycie:</label>
                                            <input type="number" id="zuzycie_energia_cieplna"
                                                   name="zuzycie_energia_cieplna" class="form-control" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="jednostka_energia_cieplna">Jednostka:</label>
                                            <select id="jednostka_energia_cieplna" name="jednostka_energia_cieplna"
                                                    class="form-select" required>
                                                <option value="GJ/rok">GJ/rok</option>
                                                <option value="kWh/rok">kWh/rok</option>
                                            </select>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Anuluj
                                    </button>
                                    <button type="button" id="zapisz_energia_cieplna_btn" class="btn btn-primary">
                                        Zapisz
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Step navigation buttons -->
            <div class="d-flex justify-content-between mt-3">
                <!-- Przycisk "Poprzedni krok" po lewej stronie -->
                <div>
                    <button type="button" class="btn btn-secondary prev-step">Poprzedni krok</button>
                </div>

                <!-- Przycisk "Następny krok" po prawej stronie -->
                <div>
                    <button type="button" class="btn btn-primary next-step">Następny krok</button>
                </div>
            </div>

        </div>


        <!-- Step 4 (Hidden by default) -->
        <div class="step d-none" data-step="4">
            <!-- Emisje łącznie -->
            <div class="row mb-5">
                <div class="col-md-8">
                    <h2 class="fw-bold text-gray-900">Emisje łącznie</h2>
                    <h1 class="display-4 fw-bold text-gray-900">127.72 <span class="fs-4">t CO2e/rok</span></h1>
                    <button type="button" class="btn btn-success"
                            onclick="window.location.href='{{ url_for('generate_pdf') }}'">Pobierz raport PDF
                    </button>

                </div>
            </div>

            <!-- Dane dotyczące emisji -->
            <div class="row mb-5">
                <div class="col-md-4">
                    <h5>Emisje na m²</h5>
                    <p class="fw-bold">2.55 <span class="fs-6">t CO2e/rok</span></p>
                </div>
                <div class="col-md-4">
                    <h5>Emisje na pracownika</h5>
                    <p class="fw-bold">127.72 <span class="fs-6">t CO2e/rok na pracownika</span></p>
                </div>
                <div class="col-md-4">
                    <h5>Emisje na obrót firmy</h5>
                    <p class="fw-bold">1.28 <span class="fs-6">t CO2e/rok na 1000 zł obrotu</span></p>
                </div>
            </div>

            <!-- Zakres 1 i Zakres 2 -->
            <div class="row mb-5">
                <div class="col-md-6">
                    <h5 class="fw-bold text-gray-900"><span class="text-primary">•</span> Zakres 1 (emisje bezpośrednie)
                    </h5>
                    <p class="fw-bold text-gray-900">2.97 t CO2e/rok <span class="text-muted">(2.33%)</span></p>
                    <ul class="list-unstyled">
                        <li>Olej opałowy - 0.01 t CO2e/rok (0.01%)</li>
                        <li>Gaz ziemny - 0.01 t CO2e/rok (0.01%)</li>
                        <li>Paliwo w samochodach należących bądź będących pod kontrolą firmy - 2.96 t CO2e/rok (2.31%)
                        </li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h5 class="fw-bold text-gray-900"><span class="text-warning">•</span> Zakres 2 (emisje pośrednie)
                    </h5>
                    <p class="fw-bold text-gray-900">124.75 t CO2e/rok <span class="text-muted">(97.67%)</span></p>
                    <ul class="list-unstyled">
                        <li>Energia elektryczna - 80.81 t CO2e/rok (63.27%)</li>
                        <li>Energia cieplna - 43.94 t CO2e/rok (34.40%)</li>
                    </ul>
                </div>
            </div>

            <!-- Wykresy -->
            <div class="row mb-5">
                <div class="col-md-6">
                    <h5 class="fw-bold text-gray-900">Porównanie emisji przedsiębiorstwa</h5>
                    <ul class="list-unstyled">
                        <li>218 osób można rocznie zaopatrzyć w energię elektryczną</li>
                        <li>90 osób musiałoby przesiąść się z samochodu na rower, żeby skompensować te emisje</li>
                        <li>5616 razy można przejechać koleją z Gdyni do Krakowa</li>
                        <li>15 razy można okrążyć Ziemię samochodem</li>
                    </ul>
                </div>
                <div class="col-md-6 d-flex justify-content-center align-items-center" style="height: 300px;">
                    <canvas id="pieChart"></canvas>
                </div>
            </div>

            <!-- Wykres słupkowy -->
            <div class="row mb-5">
                <div class="col-md-12" style="height: 200px;">
                    <canvas id="barChart"></canvas>
                </div>
            </div>

            <!-- Wskaźniki rozróżnienia metod -->
            <div class="row">
                <div class="col-md-12">
                    <h5 class="fw-bold text-gray-900">Rozróżnienie metod:</h5>
                    <ul class="list-unstyled">
                        <li><strong>Location-based</strong>: Opiera się na lokalizacji. Odzwierciedla średnią
                            intensywność emisji w sieciach.
                        </li>
                        <li><strong>Market-based</strong>: Odzwierciedla emisje wybrane przez przedsiębiorstwa na
                            podstawie umów dotyczących zakupu energii.
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Ramka z informacjami o redukcji -->
            <div class="row mb-5 p-4" style="background-color: #f2f2f9; border-radius: 8px;">
                <div class="col-md-8">
                    <h3 class="fw-bold">Podejmij akcje, zacznij redukować emisje</h3>
                    <p class="text-muted">W zakresie w jakim podlegam przepisom o ochronie danych osobowych:</p>
                    <div class="form-check mb-2">
                        <input class="form-check-input" type="checkbox" id="consent1">
                        <label class="form-check-label" for="consent1">
                            Wyrażam zgodę na udostępnienie przez ING Usługi dla Biznesu S.A. moich danych osobowych (tj.
                            NIP, nazwa firmy, imię, nazwisko oraz adres e-mail) do ING Bank Śląski S.A. w celu oceny
                            ryzyka transformacji.
                        </label>
                    </div>
                    <div class="form-check mb-4">
                        <input class="form-check-input" type="checkbox" id="consent2">
                        <label class="form-check-label" for="consent2">
                            Wyrażam zgodę na udostępnienie przez ING Usługi dla Biznesu S.A. moich danych osobowych (tj.
                            NIP, nazwa firmy, imię, nazwisko oraz adres e-mail) do Fundacji Climate Strategies Poland z
                            siedzibą w Gdańsku, w celu przekazywania mi oraz reprezentowanemu przeze mnie podmiotowi
                            informacji branżowych, dotyczących konkurencyjności klimatycznej przedsiębiorstw oraz
                            aktualizacji o wydarzeniach organizowanych przez Fundację Climate Strategies Poland.
                        </label>
                    </div>
                    <p class="text-muted">Wiem, że mam prawo w dowolnym momencie wycofać zgodę. Wycofanie zgody nie
                        wpływa na zgodność z prawem przetwarzania, którego dokonano na podstawie zgody przed jej
                        wycofaniem.</p>
                    <button type="button" class="btn btn-success"
                            onclick="window.location.href='{{ url_for('generate_pdf') }}'">Pobierz raport PDF
                    </button>
                    <button type="button" class="btn btn-primary">Umów się na konsultację</button>
                </div>
                <div class="col-md-4 text-end">
                    <h3 class="fw-bold text-gray-900">Emisje po redukcji</h3>
                    <h1 class="display-5 fw-bold text-primary">46.91 <span class="fs-4">t CO2e/rok</span></h1>
                    <p class="fw-bold">Redukcja <span class="text-primary">63.27%</span></p>
                </div>
            </div>

            <!-- Opisy dotyczące metodologii -->
            <div class="row mb-5">
                <div class="col-md-12">
                    <p class="text-muted">
                        Kalkulację należy traktować wyłącznie jako estymację śladu węglowego. Nie stanowi ona wyłącznej
                        metodyki obliczeń dokonywanych przez Fundację Climate Strategies Poland oraz nie uwzględnia w
                        sposób wyczerpujący wszystkich okoliczności mających wpływ na obliczenie śladu węglowego.
                    </p>
                    <p class="text-muted">
                        Wykorzystany w opracowaniu wskaźnik emisji GHG, spośród powszechnie dostępnych, charakteryzuje
                        się istotnością:
                    </p>
                    <ul class="text-muted">
                        <li>czasową – wskaźniki adekwatne/najbliższe dla okresu, dla którego liczony jest ślad
                            węglowy,
                        </li>
                        <li>geograficzną – wskaźniki reprezentatywne dla obszaru, dla którego liczony jest ślad
                            węglowy,
                        </li>
                        <li>technologiczną – wskaźniki uwzględniające stosowaną technologię, dla której liczony jest
                            ślad węglowy.
                        </li>
                    </ul>
                    <p class="text-muted">
                        Polegamy na współczynnikach z uznanych, recenzowanych, oficjalnie publikowanych źródeł:
                    </p>
                    <ul class="text-muted">
                        <li>krajowych i międzynarodowych ośrodków badawczych,</li>
                        <li>stowarzyszeń branżowych,</li>
                        <li>ośrodków odpowiedzialnych za regulacje prawne, monitoring, statystyki w dedykowanych
                            obszarach.
                        </li>
                    </ul>
                    <p class="text-muted">
                        Nasze podejście jest zgodne z zapisami metodyk GHG Protocol, IPCC, a także wskazanych norm. 1
                        12006 IPCC Guidelines for National Greenhouse Gas Inventories. Chapter 2: Approaches to Data
                        Collection; GHG Protocol: A Corporate Accounting and Reporting Standard; PAS 2050:2011.
                    </p>
                </div>
            </div>
            <!-- Step navigation buttons -->
            <div class="d-flex justify-content-between mt-3">
                <!-- Przycisk "Poprzedni krok" po lewej stronie -->
                <div>
                    <button type="button" class="btn btn-secondary prev-step">Poprzedni krok</button>
                </div>

                <!-- Przycisk "Następny krok" po prawej stronie -->
                <div>
                    <button type="button" class="btn btn-primary next-step">Następny krok</button>
                </div>
            </div>
        </div>


        <!-- Step 5 (Hidden by default) -->
        <div class="step d-none" data-step="5">
            <!-- Sekcje A1 i A2 -->
            <div class="row mb-5">
                <div class="col-md-12">
                    <h3 class="fw-bold text-gray-900">Gratulacje! Wiesz już, jaki ślad węglowy generuje działalność
                        Twojej firmy w zakresie 1 i 2 GHG.</h3>
                    <p>To pierwszy krok w kierunku obniżenia emisji gazów cieplarnianych. Co dalej? W przygotowaniu i
                        wdrożeniu strategii redukcji emisyjności pomogą Ci dźwignie redukcji śladu węglowego. Są to
                        działania, które doprowadzą do obniżenia emisji ze źródeł, które mają duży udział w całkowitym
                        śladzie węglowym przedsiębiorstwa.</p>
                </div>
            </div>

            <!-- Zakresy -->
            <div class="row mb-5">
                <div class="col-md-12">
                    <h4 class="fw-bold text-gray-900">Zakres 1</h4>
                    <ul>
                        <li>Wybieraj pojazdy o niższym śladzie węglowym, np. korzystaj z wózka widłowego zasilanego
                            energią elektryczną pochodzącą z OZE.
                        </li>
                        <li>Wymień samochody spalinowe na takie, które są zasilane energią elektryczną pochodzącą ze
                            źródeł odnawialnych.
                        </li>
                        <li>Postaw na naturalne czynniki chłodnicze w klimatyzacji.</li>
                    </ul>
                </div>
            </div>

            <div class="row mb-5">
                <div class="col-md-12">
                    <h4 class="fw-bold text-gray-900">Zakres 2</h4>
                    <ul>
                        <li>Korzystaj z energii elektrycznej, która pochodzi z odnawialnych źródeł emisji, np. zielonej
                            energii elektrycznej.
                        </li>
                        <li>Redukuj zużycie mediów.</li>
                        <li>Wprowadź elektryczne ogrzewanie w budynkach.</li>
                    </ul>
                </div>
            </div>

            <div class="row mb-5">
                <div class="col-md-12">
                    <h4 class="fw-bold text-gray-900">Zakres 3</h4>
                    <ul>
                        <li>Ograniczaj zakup materiałów i dobór kapitałowych.</li>
                        <li>Redukuj zużycie surowców dzięki optymalizacji procesów.</li>
                        <li>Weryfikuj łańcuch dostaw, czyli sprawdzaj skąd pochodzą surowce i jak są transportowane.
                        </li>
                        <li>Uświadamiaj pracowników w zakresie proekologicznych zachowań (np. wyboru roweru zamiast
                            samochodu).
                        </li>
                        <li>Segreguj odpady.</li>
                    </ul>
                </div>
            </div>

            <div class="row mb-5">
                <div class="col-md-12">
                    <h4 class="fw-bold text-gray-900">Co dalej? Jak możesz wykorzystać estymację śladu węglowego swojej
                        firmy?</h4>
                    <ol>
                        <li><strong>Sprawdź poprawność danych w formularzu:</strong> Podstawę do zewnętrznego
                            raportowania informacji na temat wyliczonego śladu węglowego stanowi zgodność obliczeń ze
                            standardem kalkulacji gazów cieplarnianych GHG Protocol. Indywidualna konsultacja z naszym
                            ekspertem pozwoli Ci zweryfikować, czy wprowadzone w kalkulatorze dane zostały wprowadzone
                            poprawnie.
                        </li>
                        <li><strong>Zaprojektuj strategię redukcji emisji:</strong> Dobrze przygotowana strategia to
                            skomplikowany i powiązany system regulacyjno – społeczno – gospodarczy, w który zaangażowani
                            są praktycznie wszyscy interesariusze. Wymaga on kilku milowych kroków i zdefiniowania
                            najważniejszych założeń tj. zmapowania obszarów działalności czy potencjalnych sposobów
                            osiągania neutralności klimatycznej. Pomagamy odpowiednio zaplanować i sukcesywnie wdrażać
                            te działania, by przyniosły jak największe korzyści.
                        </li>
                        <li><strong>Redukuj emisje gazów cieplarnianych:</strong> Po obliczeniu śladu węglowego firmy
                            pojawia się pytanie: co dalej? To jest ten moment, kiedy należy zastanowić się nad
                            możliwością stworzenia i wdrożenia planu redukcji emisji oraz strategii unikania emisji
                            zarówno we własnym zakresie, jak i w całym łańcuchu wartości. Dobrą praktyką jest, by
                            ograniczanie emisji rozpocząć od najprostszych kroków, które nie wymagają od nas większego
                            wysiłku, i stopniowo przechodzić do najbardziej skomplikowanych i czasochłonnych procesów.
                        </li>
                        <li><strong>Kompensuj ślad węglowy:</strong> Kolejnym krokiem po wdrożeniu działań
                            ograniczających emisje gazów cieplarnianych jest kompensacja emisji, których nie da się
                            zredukować. Wybór działań offsetowych jest trudnym tematem, wokół którego pojawia się
                            mnóstwo sprzecznych informacji. Łatwo wpaść w pułapkę i nawet mając najlepsze zamiary –
                            zostać posądzonym o greenwashing. Dlatego bazując na doświadczeniu naszych ekspertów,
                            pomagamy przedsiębiorstwom podjąć najlepsze dla nich decyzje.
                        </li>
                        <li><strong>Opracuj strategię komunikacji wewnętrznej i zewnętrznej:</strong> Nawet
                            najrzetelniej przygotowana strategia redukcji i kompensacji emisji może przysporzyć
                            problemów, jeśli nie będzie odpowiednio komunikowana. W pracy z firmami kładziemy nacisk na
                            odpowiedzialną komunikację klimatyczną, pokazywanie działań firmy w szerszym kontekście i
                            adresowanie obszarów jej największej emisyjności. Prowadzimy warsztaty w obszarze
                            greenwashingu w deklaracjach klimatycznych.
                        </li>
                        <li><strong>Pokaż się światu:</strong> Jednym ze sposobów zaprezentowania i zweryfikowania
                            środowiskowej polityki firmy jest sprawozdanie wyników emisyjności i działań
                            proklimatycznych w raportach globalnego projektu CDP. Takie raportowanie pomaga zmierzyć
                            postępy, ale też pozycjonuje firmę na tle danej branży oraz firm podobnej wielkości, zarówno
                            w Polsce, Europie jak i na świecie. Do tej pory swoje wyniki opublikowało tu ponad 10
                            tysięcy zaangażowanych klimatycznie firm, miast i regionów. Zgłaszając się do CDP, można
                            uzyskać przewagę nad konkurencją. Ujawnianie wyników pomaga również wyprzedzić zmiany
                            regulacyjne i polityczne. Niesie to możliwość znalezienia nowych strumieni działania,
                            których wymagają inwestorzy i klienci na całym świecie. Proces opracowania wyników pod kątem
                            raportowania do CDP jest żmudny i czasochłonny. Nasza Fundacja pomaga w systematyzacji i ich
                            ujawnieniu względem CDP.
                        </li>
                    </ol>
                </div>
            </div>

            <!-- Step navigation buttons -->
            <div class="d-flex justify-content-between mt-3">
                <button type="button" class="btn btn-secondary prev-step">Poprzedni krok</button>
                <div>
                    <button type="submit" class="btn btn-success">Zakończ i zapisz</button>
                </div>
            </div>
        </div>
    </form>
</div>
<!-- Bootstrap 5 JS Bundle (zawiera Popper) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- jQuery (opcjonalnie) -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.repeater@1.2.1/jquery.repeater.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


<!-- Custom JS (opcjonalnie) -->
<script src="{{ url_for('static', filename='js/form.js') }}"></script>

</body>
</html>